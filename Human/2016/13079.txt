The subpower membership problem for semigroups

Fix a finite semigroup $S$ and let $a_1,\ldots,a_k, b$ be tuples in a direct power $S^n$. The subpower membership problem (SMP) asks whether $b$ can be generated by $a_1,\ldots,a_k$. If $S$ is a finite group, then there is a folklore algorithm that decides this problem in time polynomial in $nk$. For semigroups this problem always lies in PSPACE. We show that the SMP for a full transformation semigroup on 3 letters or more is actually PSPACE-complete, while on 2 letters it is in P. For commutative semigroups, we provide a dichotomy result: if a commutative semigroup $S$ embeds into a direct product of a Clifford semigroup and a nilpotent semigroup, then SMP(S) is in P; otherwise it is NP-complete.

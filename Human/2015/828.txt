Defining and composing big state machines

A sequence function alternative representation of state machines.
